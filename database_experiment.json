{
  "version": "1.0.0",
  "title": "Test Database Connection and Stop Database",
  "description": "An experiment to test the database connection and stop the database instance with identifier 'database-1-instance-1' in the eu-west-1 region.",
  "tags": [
    "database",
    "aws",
    "chaos"
  ],
  "steady-state-hypothesis": {
    "title": "Database Connection is Healthy",
    "probes": [
      {
        "type": "probe",
        "name": "check_database_connection",
        "tolerance": 200,
        "provider": {
          "type": "python",
          "module": "chaosaws.rds.probes",
          "func": "describe_db_instances",
          "arguments": {
            "client": {
              "type": "aws",
              "service": "rds",
              "region": "eu-west-1"
            }
          }
        }
      }
    ]
  },
  "method": [
    {
      "type": "action",
      "name": "stop_database",
      "provider": {
        "type": "python",
        "module": "chaosaws.rds.actions",
        "func": "stop_db_instance",
        "arguments": {
          "client": {
            "type": "aws",
            "service": "rds",
            "region": "eu-west-1"
          },
          "db_instance_identifier": "database-1-instance-1"
        }
      }
    }
  ],
  "rollbacks": [
    {
      "type": "action",
      "name": "start_database",
      "provider": {
        "type": "python",
        "module": "chaosaws.rds.actions",
        "func": "start_db_instance",
        "arguments": {
          "client": {
            "type": "aws",
            "service": "rds",
            "region": "eu-west-1"
          },
          "db_instance_identifier": "database-1-instance-1"
        }
      }
    }
  ]
}